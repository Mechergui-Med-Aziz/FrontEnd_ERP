<div class="grid grid-cols-2 gap-4">
    <!-- Actions des candidats -->
    <div class="bg-gray-100 p-4 rounded-lg shadow">
      <h2 class="text-lg font-bold mb-2">Actions des CRM</h2>
      <table class="w-full border-collapse border border-gray-300">
        <thead>
          <tr class="bg-gray-200">
            <th class="border p-2" hidden>ID</th>
            <th class="border p-2">LIBELLÉ</th>
            <th class="border p-2">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let action of actionsCRM" class="bg-white border">
            <td class="border p-2 text-center" hidden>{{ action.id }}</td>
            <td class="border p-2">
              {{ action.name }}
            </td>
            <td class="border p-2 flex justify-center gap-2">
                <button class="bg-blue-100 text-blue-500 hover:bg-blue-200 p-2 rounded-full" (click)="openEditModal(action)">
                    <i class="fas fa-edit"></i>
                  </button>
                  
                  <button class="bg-red-100 text-red-500 hover:bg-red-200 p-2 ml-2 rounded-full" (click)="openDeleteModal(action)">
                    <i class="fas fa-trash"></i>
                  </button>
                  
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  
    <div class="bg-gray-100 p-4 rounded-lg shadow">
      <h2 class="text-lg font-bold mb-2">Actions des Besoins</h2>
      <table class="w-full border-collapse border border-gray-300">
        <thead>
          <tr class="bg-gray-200">
            <th class="border p-2" hidden>ID</th>
            <th class="border p-2">LIBELLÉ</th>
            <th class="border p-2">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let action of actionsBesoins" class="bg-white border">
            <td class="border p-2 text-center" hidden>{{ action.id }}</td>
            <td class="border p-2">
              {{action.name}}
            </td>
            <td class="border p-2 flex justify-center gap-2">
                <button class="bg-blue-100 text-blue-500 hover:bg-blue-200 p-2 rounded-full" (click)="openEditModal(action)">
                    <i class="fas fa-edit"></i>
                  </button>
                  
                  <button class="bg-red-100 text-red-500 hover:bg-red-200 ml-2 p-2 rounded-full" (click)="openDeleteModal(action)">
                    <i class="fas fa-trash"></i>
                  </button>
                  
            </td>
          </tr>
        </tbody>
      </table>
      
    </div>
  </div>

  <button class="px-4 py-2 bg-green-500 mt-2 text-white rounded" (click)="openAddModal()">
  Ajouter un type d'action
</button>

<div *ngIf="isAddModalOpen" class="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center">
    <div class="bg-white rounded-lg w-1/3 p-6">
      <h2 class="text-2xl font-bold mb-4 bg-white text-black">Ajouter Un Type Action </h2>
      <form [formGroup]="AddTypeActionForm">

        <div class="mb-4">
          <label for="typeActionName" class="block text-sm font-medium text-gray-700">Libellé</label>
          <input type="text" id="typeActionName" formControlName="typeActionName" name="typeActionName" class="mt-1 p-2 w-full border border-gray-300 rounded bg-white text-black" />
        </div>
        <div class="mb-4">
            <label for="typeActionbelongTo" class="block text-sm font-medium text-gray-700">Appartient à </label>
            <select id="typeActionbelongTo" formControlName="typeActionbelongTo" name="typeActionbelongTo" class="mt-1 p-2 w-full border border-gray-300 rounded bg-white text-black">
              <option value="CRM">CRM</option>
              <option value="Besoin">Besoin</option>
            </select>
          </div>
          <div class="flex justify-end gap-4">
            <button type="button" class="bg-gray-400 text-white px-4 py-2 rounded" (click)="closeAddModal()">Annuler</button>
            <button type="button" class="bg-blue-500 text-white px-4 py-2 rounded"(click)="addTypeAction()"  [disabled]="AddTypeActionForm.invalid">Ajouter</button>
          </div>
        </form>
      </div>
    </div>




  <div *ngIf="isModalOpen" class="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center">
    <div class="bg-white rounded-lg w-1/3 p-6">
      <h2 class="text-2xl font-bold mb-4 bg-white text-black">Modifier Type Action </h2>
      <form [formGroup]="typeActionForm">
        <div class="mb-4" hidden>
            <label for="id" class="block text-sm font-medium text-gray-700" >ID</label>
            <input type="text" id="id" formControlName="id" class="mt-1 p-2 w-full border border-gray-300 rounded bg-white text-black" readonly />
          </div>

        <div class="mb-4">
          <label for="name" class="block text-sm font-medium text-gray-700">Libellé</label>
          <input type="text" id="name" formControlName="name" class="mt-1 p-2 w-full border border-gray-300 rounded bg-white text-black" />
        </div>
        <div class="mb-4">
            <label for="belongTo" class="block text-sm font-medium text-gray-700">Appartient à </label>
            <select id="belongTo" formControlName="belongTo" class="mt-1 p-2 w-full border border-gray-300 rounded bg-white text-black">
              <option value="CRM">CRM</option>
              <option value="Besoin">Besoin</option>
            </select>
          </div>
          
                  
        <div class="flex justify-end gap-4">
          <button type="button" class="bg-gray-400 text-white px-4 py-2 rounded" (click)="closeModal()">Annuler</button>
          <button type="button" class="bg-blue-500 text-white px-4 py-2 rounded"(click)="modifyTypeAction()"  [disabled]="typeActionForm.invalid">Sauvegarder</button>
        </div>
      </form>
    </div>
  </div>
  <div *ngIf="isModalOpen2" class="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center">
    <div class="bg-white rounded-lg w-1/3 p-6">
      <h2 class="text-2xl font-bold mb-4 bg-white text-black">{{message}}</h2>
      
      <div class="flex justify-end">
        <button type="button" class="bg-green-400 text-white px-4 py-2 rounded" (click)="closeModal2()">Ok</button>
      </div>
    </div>
  </div>

  <div *ngIf="isDeleteModalOpen" class="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center">
    <div class="bg-white rounded-lg w-1/3 p-6">
      <h2 class="text-2xl font-bold mb-4 bg-white text-black">Etes-Vous Sûr de supprimer le type action {{deletedAction.name}}</h2>
      
      <div class="flex justify-end gap-4">
        <button type="button" class="bg-green-400 text-white px-4 py-2 rounded" (click)="closeDeleteModal()">Non</button>
        <button type="button" class="bg-red-500 text-white px-4 py-2 rounded"(click)="deleteTypeAction(deletedAction.id)">Oui</button>
      </div>
    </div>
  </div>
  